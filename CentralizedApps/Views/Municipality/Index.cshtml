@using Microsoft.CodeAnalysis.Scripting
@model List<CentralizedApps.Models.Dtos.PrincipalsDtos.GetMunicipalitysDto>;

@{
    ViewData["Title"] = "Index HOLA r";
    Layout = "Layout";
}

<div class=" flex flex-col P-10 ">

    <div class="flex flex-col md:flex-row p-4 gap-4  justify-between ">
        <h1 class="w-full md:w-1/3 h-15 flex items-center justify-center text-4xl font-bold ">
            Gestión De Municipios
        </h1>
        <div class=" w-full md:w-1/4 flex justify-center items-center self-center">

            <form asp-action="Index" asp-controller="Municipality" method="get"
                class="w-full md:w-full flex justify-center">
                <input type="text" name="filter" class="input w-full md:1/2 bg-base-100"
                    placeholder="Buscar por Municipio, Departamento o Banco..." />
            </form>

        </div>
        <div class="w-full md:w-1/4 flex flex-wrap justify-evenly md:justify-evenly gap-2 p-2 self-end">
            <form asp-controller="Municipality" asp-action="updateMunicipality" method="get">
                <button type="submit" class="btn btn-outline btn-accent w-25">CREAR</button>
            </form>
        </div>
    </div>

    <br>
    <div>
        <div class="overflow-x-auto mt-4">
            <table class="table">
                <thead class="bg-base-100 ">
                    <tr class="text-center">
                        <th>Municipio</th>
                        <th>Código</th>
                        <th>Departamento</th>
                        <th>Banco</th>
                        <th>Activo</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var municipio in Model)
                    {
                        <tr class="text-center">
                            <td class="text-start">
                                <div class="flex items-center gap-3">
                                    <div class="avatar">
                                        <div class="mask mask-squircle h-12 w-12">
                                            <img src="@municipio?.IdShield?.Url" alt="escudo municipio" />
                                        </div>
                                    </div>
                                    <div>
                                        <div class="font-bold">@municipio?.Name</div>
                                        <div class="text-sm opacity-50">@municipio?.Department?.Name</div>
                                    </div>
                                </div>
                            </td>
                            <td>@municipio?.EntityCode</td>
                            <td>@municipio?.Department?.Name</td>
                            <td>@municipio?.Bank?.NameBank</td>
                            <td>
                                <div class="flex justify-evenly">

                                    <form asp-controller="Municipality" asp-action="UpdateStatusMunicipality" method="post">
                                        <input type="hidden" name="id" value="@municipio?.Id" />
                                        <input type="hidden" name="isActive"
                                            value="@(municipio?.IsActive == true ? "false" : "true")" />
                                        <button type="submit"
                                            class="btn btn-outline w-25 @(municipio?.IsActive == true ? "btn-accent" : "btn-error")">
                                            @(municipio?.IsActive == true ? "Activo" : "Desactivado")
                                        </button>
                                    </form>
                                    <form asp-controller="Municipality" asp-action="updateMunicipality" method="get">
                                        <input type="hidden" name="id" value="@municipio?.Id" />
                                        <button type="submit" class="btn btn-outline btn-warning w-25">
                                            Editar
                                        </button>
                                    </form>
                                </div>
                            </td>

                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>